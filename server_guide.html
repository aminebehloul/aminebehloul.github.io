<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Doctor - Local Server Guide</title>
    <style>
        :root {
            --bg-color: #121212;
            --surface-color: #1E1E1E;
            --primary-color: #00E5FF; /* Cyan Neon */
            --text-primary: #FFFFFF;
            --text-secondary: #B0BEC5;
            --code-bg: #263238;
            --code-border: #37474F;
            --accent-green: #00E676;
            --accent-red: #FF5252;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 24px;
        }

        /* HEADER */
        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 1px solid #333;
            margin-bottom: 32px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .highlight {
            color: var(--primary-color);
            font-weight: bold;
        }

        /* CARD */
        .card {
            background-color: var(--surface-color);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        h2 {
            font-size: 1.25rem;
            margin-top: 0;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        h2 svg {
            margin-right: 10px;
            fill: var(--primary-color);
        }

        /* STEPS */
        .step {
            display: flex;
            margin-bottom: 20px;
        }

        .step-number {
            background-color: var(--primary-color);
            color: #000;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 16px;
            flex-shrink: 0;
        }

        /* FIXED: Use a specific class for the title, not generic 'strong' */
        .step-title {
            display: block;
            margin-bottom: 4px;
            font-size: 1.05rem;
            font-weight: bold;
            color: var(--text-primary);
        }

        .step-content p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
        
        /* Ensure bold text inside paragraphs stays inline */
        .step-content strong {
            color: #fff;
            font-weight: bold;
        }

        /* CODE BLOCK */
        .code-container {
            position: relative;
            background-color: var(--code-bg);
            border: 1px solid var(--code-border);
            border-radius: 8px;
            overflow: hidden;
            margin: 16px 0;
        }

        .code-header {
            background-color: #1a2226;
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--code-border);
            font-family: monospace;
            font-size: 0.85rem;
            color: #78909C;
        }

        .copy-btn {
            background: transparent;
            border: 1px solid #78909C;
            color: #78909C;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .copy-btn.copied {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        pre {
            margin: 0;
            padding: 16px;
            overflow-x: auto;
        }

        code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            color: #C3E88D; /* Matrix/Light Green */
        }

        /* FOOTER / TROUBLESHOOTING */
        .warning-box {
            background-color: rgba(255, 145, 0, 0.1);
            border-left: 4px solid #FF9100;
            padding: 16px;
            border-radius: 4px;
        }

        .warning-title {
            color: #FF9100;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .inline-code {
            background: #333;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            color: #fff;
        }
        
        /* URL Box Style */
        .url-box {
            background: #000;
            border: 1px solid #333;
            color: #fff;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            margin-top: 8px;
            display: inline-block;
        }
        
        .protocol { color: #FF5252; } /* Red for HTTP emphasis */
        .port { color: #00E5FF; }

        @media (max-width: 600px) {
            .container { padding: 16px; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Local Speed Server</h1>
            <div class="subtitle">Measure your true <span class="highlight">Wi-Fi Capacity</span></div>
        </header>

        <div class="card">
            <h2>
                <svg width="24" height="24" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zM0 0h24v24H0z" fill="none"/><path d="M12 10l-2-2v1h-4v2h4v1l2-2zm6 4H8v-2h10v2z"/></svg>
                Why run a local server?
            </h2>
            <p style="color: var(--text-secondary); margin-bottom: 0;">
                Traditional speed tests only measure your ISP internet speed. By running this script on your PC, you can test the raw speed between your <strong>Phone</strong> and your <strong>Router</strong> to diagnose Wi-Fi hardware bottlenecks.
            </p>
        </div>

        <div class="card">
            <h2>The Python Script</h2>
            <p style="color: var(--text-secondary);">Copy this code and save it as <span class="inline-code">server.py</span> on your computer.</p>
            
            <div class="code-container">
                <div class="code-header">
                    <span>server.py</span>
                    <button class="copy-btn" onclick="copyCode()">Copy Code</button>
                </div>
                <pre><code id="python-code">from http.server import HTTPServer, BaseHTTPRequestHandler
import time

# üöÄ WiFi Doctor Speed Test Server
# Run on a PC connected via Ethernet for best results.

HOST_NAME = '0.0.0.0'
PORT_NUMBER = 8000

class SpeedTestHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        # DOWNLOAD TEST
        self.send_response(200)
        self.send_header("Content-type", "application/octet-stream")
        self.send_header("Content-Length", "1000000000") # 1GB Virtual
        self.end_headers()
        chunk = b'\0' * 65536
        try:
            while True: self.wfile.write(chunk)
        except: pass

    def do_POST(self):
        # UPLOAD TEST
        self.send_response(200)
        self.end_headers()
        try:
            while True:
                if not self.rfile.read(65536): break
        except: pass
    
    def log_message(self, format, *args): pass

if __name__ == '__main__':
    httpd = HTTPServer((HOST_NAME, PORT_NUMBER), SpeedTestHandler)
    print(f"‚úÖ Server Running on port {PORT_NUMBER}")
    print("üëâ Use your PC's IP address in the WiFi Doctor app")
    try: httpd.serve_forever()
    except KeyboardInterrupt: pass
    httpd.server_close()</code></pre>
            </div>
        </div>

        <div class="card">
            <h2>How to Run</h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">Install Python</div>
                    <p>Ensure you have Python 3 installed on your computer. You can check by typing <span class="inline-code">python --version</span> in your terminal.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">Run the Script</div>
                    <p>Open your terminal/command prompt in the folder where you saved the file and run:</p>
                    <div style="margin-top: 8px;">
                        <span class="inline-code">python3 server.py</span>
                    </div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">Enter Server URL</div>
                    <p>In the WiFi Doctor app, enter your computer's IP address followed by the port <strong>8000</strong>.</p>
                    <p style="margin-top:8px; font-size: 0.9rem; color: #B0BEC5;">Use <strong>http</strong> (not https) and format it exactly like this:</p>
                    
                    <div class="url-box">
                        <span class="protocol">http://</span>192.168.1.15<span class="port">:8000</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="warning-box">
            <div class="warning-title">‚ö†Ô∏è Troubleshooting</div>
            <div style="color: #FFB74D; font-size: 0.9rem;">
                If the connection times out, your computer's <strong>Firewall</strong> is likely blocking Port 8000. Please allow Python through your firewall or temporarily disable it for the test.
            </div>
        </div>
    </div>

    <script>
        function copyCode() {
            const codeText = document.getElementById('python-code').innerText;
            navigator.clipboard.writeText(codeText).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = "Copied!";
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = "Copy Code";
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>

</body>
</html>
